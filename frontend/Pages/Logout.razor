
@page "/logout"
@inject NavigationManager NavigationManager
@inject IJSRuntime JSRuntime
@inject CustomAuthStateProvider AuthStateProvider

<PageTitle>Logout - SharpCraft Shop</PageTitle>

@code {
    protected override async Task OnInitializedAsync()
    {
        // Remove o token do localStorage
        await JSRuntime.InvokeVoidAsync("localStorage.removeItem", "authToken");

        // Atualiza o estado de autenticação
        AuthStateProvider.MarkUserAsLoggedOut();

        // Redireciona para a página de login
        NavigationManager.NavigateTo("/login");
    }
}

<div class="min-h-screen bg-white flex items-center justify-center">
    <div class="text-center">
        <i class="fas fa-sign-out-alt text-orange-400 text-6xl mb-4"></i>
        <p class="text-xl text-gray-600 mb-4">Logging you out...</p>
        <div class="flex justify-center">
            <div class="w-8 h-8 rounded-full border-4 border-orange-300 border-t-orange-400 animate-spin"></div>
        </div>
    </div>
</div>
